{% load staticfiles i18n %}

<div id="map" class="map">
  <div class="map-shadow"></div>
  <div id="pulldown" ng-controller="LoomPulldownController">
    <div id="pulldown-shadow">
      <div class="panel flat" id="map-title">
        <div class="panel-heading">
                        <span style="font-weight: 100; font-size: 20px;">
                            <em id="map-name" translate="new_map">New Map</em>
                        </span>
          <span ng-class="{'hidden': !notificationsPanel}" class="loom-notification-badge pull-right"></span>
        </div>
      </div>
      <div id="pulldown-content" class="panel-group in">
        <div class="panel" ng-class="{'hidden': !notificationsPanel}">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#notification-panel">
            <span>Notifications</span>
            <span class="loom-notification-badge pull-right"></span>
          </div>
          <div id="notification-panel" notification-empty-text="No notifications..."
               class="pulldown-panel loom-notifications">
          </div>
        </div>
        <div class="panel" ng-class="{'hidden': !layersPanel}">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#layer-manager-panel">
            <span>Map Layers</span>
          </div>
          <div id="layer-manager-panel" class="panel-collapse collapse pulldown-panel">
            <div class="loom-layers"></div>
            <div align="center" class="panel-heading layer-heading" data-target="#add-layer-dialog" data-toggle="modal">
              <i class="glyphicon glyphicon-plus-sign"></i>
              Add Layer
            </div>
          </div>
        </div>
        <div class="panel" ng-class="{'hidden': !diffPanel}" ng-controller="LoomDiffController">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#diff-panel">
            <span>{{title}}</span>
          </div>
          <div id="diff-panel" class="loom-diff-panel panel-collapse collapse pulldown-panel">Diffs go here.</div>
        </div>
      </div>
    </div>
    <button type="button" data-toggle="collapse" data-target="#pulldown-content"
            class="toggle-menu toggle btn btn-default flat-top">Toggle Menu
    </button>
  </div>
  <div class="loom-notification-poster"></div>
  <div class="loom-zoom-to-layer-data"></div>
  <div class="loom-drag-zoom"></div>
</div>
<div loom-modal id="add-layer-dialog" modal-title="Add Layers">
  <div loom-addlayers id="add-layers">
  </div>
</div>
<div loom-modal id="add-server-dialog" modal-title="Add Server">
  <div loom-add-server id="add-server">
  </div>
</div>
<div loom-feature-info-box id="info-box" ng-show="featureInfoBoxService.getSelectedItem()" class="feature-info-box-popup">
</div>

