{% load staticfiles i18n %}
<div id="map" class="map">
  <div class="map-shadow"></div>
  <div id="pulldown" ng-controller="LoomPulldownController">
    <div id="pulldown-shadow">
      <div class="panel flat" id="map-title">
        <div class="panel-heading">
                        <span style="font-weight: 100; font-size: 20px;">
                            <em id="map-name" translate="new_map">New Map</em>
                        </span>
          <span ng-class="{'hidden': !notificationsPanel}" class="loom-notification-badge pull-right"></span>
        </div>
      </div>
      <div id="pulldown-content" class="panel-group in">
        <div class="panel" ng-show="notificationsPanel">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#notification-panel">
            <span>Notifications</span>
            <span class="loom-notification-badge pull-right"></span>
          </div>
          <div id="notification-panel" notification-empty-text="No notifications..."
               class="pulldown-panel loom-notifications">
          </div>
        </div>
        <div class="panel" ng-show="layersPanel">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#layer-manager-panel">
            <span>Map Layers</span>
          </div>
          <div id="layer-manager-panel" class="panel-collapse collapse pulldown-panel">
            <div class="loom-layers"></div>
            <div align="center" class="panel-heading layer-heading" data-target="#add-layer-dialog" data-toggle="modal">
              <i class="glyphicon glyphicon-plus-sign"></i>
              Add Layer
            </div>
          </div>
        </div>
        <div class="panel" ng-show="diffPanel" ng-controller="LoomDiffController">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#diff-panel">
            <span>{{title}}</span>
            <span ng-class="{'hidden': !(numConflicts > 0)}" class="badge pull-right">{{numConflicts}}</span>
          </div>
          <div id="diff-panel" class="loom-diff-panel panel-collapse collapse pulldown-panel">Diffs go here.</div>
        </div>
        <div class="panel" ng-show="syncPanel">
          <div class="panel-heading" data-toggle="collapse" data-parent="#pulldown-content"
               data-target="#syncronization-panel">
            <span>Synchronization</span>

            <div stop-event='click' ng-controller="modalToggle" ng-click="toggleModal('#configWindow')"
                 class="glyphicon glyphicon-cog pull-right"></div>
          </div>
          <div id="syncronization-panel" class="panel-collapse collapse">
            <div class="loom-synclinks"></div>
          </div>
        </div>
      </div>
    </div>
    <button type="button" data-toggle="collapse" data-target="#pulldown-content"
            class="toggle-menu toggle btn btn-default flat-top">Toggle Menu
    </button>
  </div>
  <div class="loom-notification-poster"></div>
  <div class="loom-legend"></div>
  <div class="loom-geometry-edit"></div>
  <div id="zoom-to-world-border" class="map-btn-border">
    <div id="zoom-to-world" ng-click="mapService.zoomToExtent()">
        <i class="glyphicon glyphicon-globe"></i>
    </div>
  </div>
</div>
<div loom-modal id="add-layer-dialog" modal-title="Add Layers">
  <div loom-addlayers id="add-layers">
  </div>
</div>
<div loom-modal id="add-server-dialog" modal-title="Add Server">
  <div loom-add-server id="add-server">
  </div>
</div>
<div loom-modal id="mergeWindow" modal-title="Merge" close-button="false">
  <div loom-merge id="merge">
  </div>
</div>
<div loom-modal id="addSyncWindow" modal-title="Add Sync">
  <div loom-addsync id="add-sync">
  </div>
</div>
<div loom-modal id="configWindow" modal-title="Config">
  <div loom-syncconfig id="sync-config">
  </div>
</div>
<div loom-modal id="feature-diff-dialog" ng-controller="LoomFeatureDiffController" modal-title="{{title}}">
  <div class="loom-feature-diff" id="feature-diff">
  </div>
</div>
<div loom-modal id="attribute-edit-dialog" modal-title="Edit Attributes">
  <div class="loom-attribute-edit" id="edit-feature">
  </div>
</div>
<div loom-feature-info-box id="info-box" ng-show="featureManagerService.getSelectedItem()"
     class="feature-info-box-popup">
</div>

<div id="blueimp-gallery" class="blueimp-gallery">
  <!-- The container for the modal slides -->
  <div class="slides"></div>
  <!-- Controls for the borderless lightbox -->
  <h3 class="title"></h3>
  <a class="prev">‹</a>
  <a class="next">›</a>
  <a class="close">×</a>
  <a class="play-pause"></a>
  <ol class="indicator"></ol>
  <!-- The modal dialog, which will be used to wrap the lightbox content -->
  <div class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" aria-hidden="true">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default pull-left prev">
            <i class="glyphicon glyphicon-chevron-left"></i>
            Previous
          </button>
          <button type="button" class="btn btn-primary next">
            Next
            <i class="glyphicon glyphicon-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

